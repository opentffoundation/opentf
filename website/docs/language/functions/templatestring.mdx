---
sidebar_label: templatestring
description: |-
  The `templatestring` function takes a string and renders it as a template using a supplied set of template variables.
---

# `templatestring` Function

The templatestring function enables string rendering as template by substituting placeholders with values from a provided set of template variables. 

```hcl
templatestring(str, vars)
```

The template syntax follows the rules for [string templates](/docs/language/expressions/strings#string-templates) in the main OpenTofu language, employing interpolation sequences delimited with ${ ... }. This function offers the flexibility to factor out longer template sequences into a separate string for enhanced readability and manageability.

The "vars" argument must be an object. Within the template string, each key in the map serves as a variable for interpolation. Additionally, the template can utilize any other function available in the OpenTofu language. Variable names must adhere to OpenTofu naming conventions, starting with a letter followed by zero or more letters, digits, or underscores.

Since strings in OpenTofu represent sequences of Unicode characters, templatestring interprets the template string as UTF-8 encoded text, ensuring proper handling of Unicode characters. Any invalid UTF-8 sequences within the template string will result in an error.

## Examples

### Simple String Template

A basic example showcasing the use of templatestring for a static string.

```hcl
output "result" {
  value = templatestring("Hello, Jodie!", {})
}
```
```
result = Hello, Jodie!
```
### String interpolation with variable

This example illustrates string interpolation by inserting a variable value into the template.

```hcl
output "result" {
  value = templatestring("Hello, ${name}!", { name = "Alice" })
}
```
```
result = Hello, Alice!
```
## Advanced Usage

Although in principle templatestring can be used with an inline template string, but we don't recommend this approach because it may lead to potential syntax issues. Instead, consider exploring alternative options such as using the local block to create a local variable and then pass that variable to the templatestring function. This approach provides better readability and avoids potential syntax errors. For a clearer understanding, refer to the example below."

### Lists

This example demonstrates the usage of the templatestring function with a list variable, joined and formatted in the resulting string.

```hcl
locals {
  list = ["value1", "value2", "value3"]
  formatted_items = join(", ", local.list)
}

output "result" {
  value = templatestring("List Items : ${local.formatted_items}", {})
}
```
```
result = "List Items : value1, value2, value3"
```

### Maps

This example demonstrates the usage of the templatestring function with a map variable. It iterates over the key-value pairs in the map and formats them into a string. 

```hcl
locals {
  items_map = { key1 = "val1", key2 = "val2"}
  formatted_items = "%{ for key, value in local.items_map ~}${key}:${value} %{ endfor ~}"
}

output "result" {
  value = templatestring("${local.formatted_items}",{})
}
```
```
result = "key1:val1 key2:val2 "
```

### Generating JSON or YAML

When generating JSON or YAML syntax strings, writing a template with numerous interpolation sequences and directives can be cumbersome. Instead, simplify the process by using a template consisting of a single interpolated call to either [`jsonencode`](/docs/language/functions/jsonencode) or
[`yamlencode`](/docs/language/functions/yamlencode), specifying the value to encode using [standard OpenTofu expression syntax](/docs/language/expressions) as in the following examples:

```hcl
locals {
  list = ["Value1", "Value2", "Value3"]
  formatted_list = "%{ for value in local.list ~}${value} %{ endfor ~}"
}

output "result" {
  value = templatestring(yamlencode(local.formatted_list), {})
}
```
```
result = <<-EOT
    "Value1 Value2 Value3 "
EOT
```

For more information, see the main documentation for
[`jsonencode`](/docs/language/functions/jsonencode) and [`yamlencode`](/docs/language/functions/yamlencode).
